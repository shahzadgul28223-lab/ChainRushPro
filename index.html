<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>OneFile DApp</title>
<script src="https://cdn.jsdelivr.net/npm/web3@1.8.2/dist/web3.min.js"></script>
<style>
body{background:#0b0e11;color:#fff;font-family:Arial}
.card{background:#161a1e;padding:15px;margin:10px;border-radius:10px}
button{padding:10px;border:none;border-radius:8px;font-weight:bold}
.buy{background:#f3ba2f}
.ok{background:#2ecc71}
</style>
</head>
<body>

<h2>ðŸ”¥ One File Decentralized System</h2>
<button onclick="connect()">Connect Wallet</button>
<p id="addr">Not connected</p>
<p>Level: <span id="lvl">0</span></p>

<div id="list"></div>

<script>
/*
================ SMART CONTRACT (REFERENCE) =================
Deploy this ONCE on BSC, then paste address below

contract OneFile {
 address public owner;
 mapping(address=>uint) public level;
 constructor(){ owner=msg.sender; level[owner]=12; }
 function buy(uint l) public payable {
   require(l==level[msg.sender]+1);
   level[msg.sender]=l;
 }
}
=============================================================
*/

// ðŸ”´ PASTE DEPLOYED CONTRACT ADDRESS HERE
const CONTRACT = "0xPASTE_CONTRACT_ADDRESS";

// ABI (minimum)
const ABI = [
 {"inputs":[],"stateMutability":"nonpayable","type":"constructor"},
 {"inputs":[{"name":"l","type":"uint256"}],"name":"buy","outputs":[],"type":"function"},
 {"inputs":[{"name":"","type":"address"}],"name":"level","outputs":[{"type":"uint256"}],"stateMutability":"view","type":"function"}
];

const LEVELS = [1,2,3,4,5];

let web3, account, app;

async function connect(){
 web3 = new Web3(window.ethereum);
 [account] = await ethereum.request({method:"eth_requestAccounts"});
 app = new web3.eth.Contract(ABI, CONTRACT);
 document.getElementById("addr").innerText = account;
 load();
}

async function load(){
 const l = await app.methods.level(account).call();
 document.getElementById("lvl").innerText = l;
 const d = document.getElementById("list");
 d.innerHTML="";
 LEVELS.forEach(x=>{
   d.innerHTML+=`
   <div class="card">
    Level ${x}
    <button class="${x<=l?'ok':'buy'}"
    onclick="${x==Number(l)+1?`buy(${x})`:''}">
    ${x<=l?'ACTIVE':'BUY'}
    </button>
   </div>`;
 });
}

async function buy(l){
 await app.methods.buy(l).send({from:account});
 load();
}
</script>

</body>
</html>
